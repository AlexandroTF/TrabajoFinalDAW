<!DOCTYPE>
<html>
    <head>
        <title>Battle bot royale</title>
        <style>
            body{
                background-color: #002233;
            }
            .host, .guest{
                position: absolute;
                height: 20vh;
                width: 60vw;
                top: 40vh;
                color: white;
                display: flex;
                border-radius: 5px;

            }
            h1, form{
                margin: auto;
                /*display: block;*/
                font-size: 4vh;
                color: white;
            }
            .host{
                background-color: darkgoldenrod;
                right: 20vw;
            }
            .guest{
                background-color: crimson;
                left: 20vw;
            }
            div>h1>a::after{
                content: "";
                position: absolute;
                height: 100%;
                width: 100%;
                top: 0;
                left: 0;
            }
            .cont{
                top: 15vh;
                padding:1em;
                height: 70vh;
            }
            #nom{
                border-radius: 5px;
                height: 10vh;
                width: 55vw;
                font-size: 1.5em;
                text-align: center;
                background: #8888;
            }
            .upload{
                position: relative;
                /*border-radius: 100em;*/
                height: 20vw;
                width: 20vw;
                /*background-color: thistle;*/  
                display: block;
                margin: 0.5em auto;
            }
            .upload>label>img{
                border-radius: 100em;
                height: 20vw;
                width: 20vw;
            }
            #avatar, #btnsubir{
                height: 5vw;
                width: 5vw;
                background-color: turquoise;
                border-radius: 100em;
                position: absolute;
                bottom: 0px;
                right: 0px;
            }
            #avatar{
                opacity: 0%;
            }
            input#nom{
                color: whitesmoke;
                font-family: 'Lora', serif;
            }
            .ok{
                position: absolute;
                bottom: 2em;
                right: 2em;
                padding: 0 2em;
                background-color: #ffe4c4;
                border-radius: 10px;
                color: black;
            }
            .ok:active{
                background-color: #c4b097;
                bottom: 1.8em;
            }
            .addbot{
                position: absolute;
                bottom: 2em;
                left: 2em;
                padding: 0 2em;
                background-color: #c2208c;
                border-radius: 10px;
                color: black;
            }
            .addbot:active{
                background-color: #991a6f;
                bottom: 1.8em;
            }
            .code{
                /*Aqui debería ser un position absolute para controlar bien el centrado*/
                position: relative;
                bottom: 7em;
            }
            .showpeople{
                border: solid black 1px;
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                display: flex;
                width: 80%;
                height: 50%;
                margin: auto;
                flex-wrap: wrap;
                font-size: 1.2em;
                overflow: scroll;
                justify-content: space-around;
                /* transform: scale(0.7); */
            }
            .equipo{
                /*border: black 1px solid;*/
                /* padding: 1%; */
                background-color: #0008;
                margin: 1%;
                /* height: 12%;
                width: 30%; */
                /* transform: scale(0.7); */
            }
            .persona{
                /*border: solid white 1px;*/
                display: flex;
                justify-content: center;
                align-content: center;
                padding: 2.5px;
                margin: 2.5px;
                /* width: 30%;
                height: 100%; */
                background-color: #0008;
            }
            .persona>img{
                height: 5em;
                width: 5em;
                border-radius: 100%;
                /* margin: auto; */
                display: block;
            }
            p.mininame{
                margin: auto;
            }
            /* https://codepen.io/chriscoyier/pen/VvRoWy */
            .showpeople::-webkit-scrollbar {
                width: 0px;
            }
        </style>
        <script>
            //alert("Se viene la batalla");
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            //alert(queryString);
            /*const color = urlParams.get('color');
            alert(color);
            const ojo = urlParams.get('ojo');
            alert(ojo);*/
        </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="host cont">
            <h1 class="code">ABCDEF</h1>
            <div class="showpeople">
                <!-- <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Tulip Olsen</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Atticus</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">One One</p>
                    </div>
                </div>
                
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Jesse Cosay</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Lake</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Alan Dracula</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Grace Monroe</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Simon Laurent</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Hazel Null</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Kezz</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Min-gi Park</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Ryan Akagi</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Amelia Hughes</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Samantha</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Randall</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">R2DRos</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Cova</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Estherdm_</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Elena580</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">IselPH</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Hirune</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">MaryJoe</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Galletana</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">GuilleViejo</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Aitor</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Lucero</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Raulo</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Saicere</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">MeriRP</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Samuu</p>
                    </div>
                </div> -->
            </div>
            <div class="ok">
                <p>Empezar</p>
            </div>
            <div class="addbot">
                <p>Añadir participante</p>
            </div>
            
        </div>
    </body>
    <script>
        //actualizar y añadir gente
        $(".addbot").on("click", ()=>{
            let nombre = prompt("Nombre");
            let imagen = prompt("ruta imagen");
            participantes[0][participantes[0].length] = nombre;
            participantes[1][participantes[1].length] = imagen;
            fnActualizarLista(nombre, imagen);
            //console.log(participantes)
            //fnActualizarLista();
        })
        //let participantes = [[],[]]
        let participantes = [["Agente 1", "Agente A", "AGENTE", "etnegA", "aGENTE CAPS", "Agenten't"],["https://picsum.photos/200/300", "https://picsum.photos/200/300", "https://picsum.photos/200/300", "https://picsum.photos/300/200", "https://picsum.photos/200/300", "https://picsum.photos/200/300"]]
        fnCrearLista()
        
        $("img.miniavatar").on("click", fnExpulsarJugador)


        function fnCrearLista(){
            const cont = $(".showpeople")[0]
            //
            for(let i = 0; i<participantes[0].length; i++){
                //hacer equipo
                let equipo = document.createElement("div");
                equipo.setAttribute("class", "equipo");
                cont.appendChild(equipo)
                
                let pj, imagen, nombre, txtNombre;
                
                i--;
                for(let j=0; j<3; j++){
                    if(i<(participantes[0].length-1)){
                        i++;
                        pj = document.createElement("div")
                        pj.setAttribute("class", "persona")
                        equipo.appendChild(pj)
                        imagen = document.createElement("img")
                        imagen.setAttribute("src", participantes[1][i])
                        imagen.setAttribute("class", "miniavatar")
                        pj.appendChild(imagen);
                        nombre = document.createElement("p")
                        nombre.setAttribute("class","mininame")
                        pj.appendChild(nombre);
                        txtNombre = document.createTextNode(participantes[0][i])
                        nombre.appendChild(txtNombre);
                    }else{
                        console.log("Error, miembro del equipo inexistente")
                    }
                }
            }
        }

        function fnActualizarLista(nmbr, imgn){
            let introducido = false;
            for(let i = 0; i<$(".equipo").length; i++){
                if($(".equipo")[i].children.length > 2 ){
                    console.log("equipo lleno")
                }else{
                    console.log("aun queda espacio")
                    pj = document.createElement("div")
                    pj.setAttribute("class", "persona")
                    $(".equipo")[i].appendChild(pj)
                    imagen = document.createElement("img")
                    imagen.setAttribute("src", imgn)
                    imagen.setAttribute("class", "miniavatar")
                    pj.appendChild(imagen);
                    nombre = document.createElement("p")
                    nombre.setAttribute("class","mininame")
                    pj.appendChild(nombre);
                    txtNombre = document.createTextNode(nmbr)
                    nombre.appendChild(txtNombre);
                    introducido = true;
                    break;
                }
            }
            if(!introducido){
                console.log("nuevo equipo")
                equipo = document.createElement("div")
                equipo.setAttribute("class", "equipo")
                $(".equipo")[0].parentElement.appendChild(equipo)
                pj = document.createElement("div")
                pj.setAttribute("class", "persona")
                equipo.appendChild(pj)
                imagen = document.createElement("img")
                imagen.setAttribute("src", imgn)
                imagen.setAttribute("class", "miniavatar")
                pj.appendChild(imagen);
                nombre = document.createElement("p")
                nombre.setAttribute("class","mininame")
                pj.appendChild(nombre);
                txtNombre = document.createTextNode(nmbr)
                nombre.appendChild(txtNombre);
                introducido = true;
            }
            $("img.miniavatar").on("click", fnExpulsarJugador)
        }

        function fnExpulsarJugador(event){
            let hijos = this.parentNode.parentNode.children.length
            if(hijos == 1){
                this.parentNode.parentNode.remove();
            }
            this.parentNode.remove()
        }
    </script>
</html>