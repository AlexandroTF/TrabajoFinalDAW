<!DOCTYPE>
<html>
    <head>
        <title>Battle bot royale</title>
        <style>
            body{
                background-color: #002233;
            }
            .host, .guest{
                position: absolute;
                height: 20vh;
                width: 60vw;
                top: 40vh;
                color: white;
                display: flex;
                border-radius: 5px;

            }
            h1, form{
                margin: auto;
                /*display: block;*/
                font-size: 4vh;
                color: white;
            }
            .host{
                background-color: darkgoldenrod;
                right: 20vw;
            }
            .guest{
                background-color: crimson;
                left: 20vw;
            }
            div>h1>a::after{
                content: "";
                position: absolute;
                height: 100%;
                width: 100%;
                top: 0;
                left: 0;
            }
            .cont{
                top: 15vh;
                padding:1em;
                height: 70vh;
            }
            #nom{
                border-radius: 5px;
                height: 10vh;
                width: 55vw;
                font-size: 1.5em;
                text-align: center;
                background: #8888;
            }
            .upload{
                position: relative;
                /*border-radius: 100em;*/
                height: 20vw;
                width: 20vw;
                /*background-color: thistle;*/  
                display: block;
                margin: 0.5em auto;
            }
            .upload>label>img{
                border-radius: 100em;
                height: 20vw;
                width: 20vw;
            }
            #avatar, #btnsubir{
                height: 5vw;
                width: 5vw;
                background-color: turquoise;
                border-radius: 100em;
                position: absolute;
                bottom: 0px;
                right: 0px;
            }
            #avatar{
                opacity: 0%;
            }
            input#nom{
                color: whitesmoke;
                font-family: 'Lora', serif;
            }
            .ok{
                position: absolute;
                bottom: 2em;
                right: 2em;
                padding: 0 2em;
                background-color: #ffe4c4;
                border-radius: 10px;
                color: black;
            }
            .ok:active{
                background-color: #c4b097;
                bottom: 1.8em;
            }
            .addbot{
                position: absolute;
                bottom: 2em;
                left: 2em;
                padding: 0 2em;
                background-color: #c2208c;
                border-radius: 10px;
                color: black;
            }
            .addbot:active{
                background-color: #991a6f;
                bottom: 1.8em;
            }
            .code{
                /*Aqui debería ser un position absolute para controlar bien el centrado*/
                position: relative;
                bottom: 7em;
            }
            .showpeople{
                border: solid black 1px;
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                display: flex;
                width: 80%;
                height: 50%;
                margin: auto;
                flex-wrap: wrap;
                font-size: 1.2em;
                overflow: scroll;
                justify-content: space-around;
                /* transform: scale(0.7); */
            }
            .equipo{
                /*border: black 1px solid;*/
                /* padding: 1%; */
                background-color: #0008;
                margin: 1%;
                /* height: 12%;
                width: 30%; */
                /* transform: scale(0.7); */
            }
            .persona{
                /*border: solid white 1px;*/
                display: flex;
                justify-content: center;
                align-content: center;
                padding: 2.5px;
                margin: 2.5px;
                position: relative;
                background-color: #0008;
            }
            .persona>img{
                height: 5em;
                width: 5em;
                border-radius: 100%;
                /* margin: auto; */
                display: block;
            }
            p.mininame{
                margin: auto;
            }
            /* https://codepen.io/chriscoyier/pen/VvRoWy */
            .showpeople::-webkit-scrollbar {
                width: 0px;
            }
            img.btnCerrar {
                position: absolute;
                height: 1.5em;
                width: 1.5em;
                top: 3%;
                right: 3%;
            }
        </style>
        <script>
            //alert("Se viene la batalla");
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            //alert(queryString);
            /*const color = urlParams.get('color');
            alert(color);
            const ojo = urlParams.get('ojo');
            alert(ojo);*/
        </script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            function fnActualizarChat(){
                console.log("imagen subida");
                // $.ajax({
                //     url: "chatlog.txt",
                //     cache: false,
                //     success: function(html){		
                //         $(".chat")[0].html(html); //Insert chat log into the #chatbox div
                //         console.log(html); //Insert chat log into the console.log
                //     },
                // });
            }
            function fnWebHook(mensaje){
                $.ajax({
                    url: 'https://discord.com/api/webhooks/845022656109477908/hvtiQkt32ffBilcCdRH7Zbi5T_BEw_kGK0rro0sKS4dw-1LEHC5o6bPt0caYI0JuGnzd',
                    data: JSON.stringify({
                        content: mensaje,
                        avatar_url:	'https://picsum.photos/200/200',
                        tts:	false,
                        file:	null,
                        embeds:	[],
                        payload_json:	null,
                        allowed_mentions: null,
                    }),
                    method: 'POST',
                    headers: {"content-type": "application/json"}
                }).done((data) => {
                    console.log(data);
                    console.log('mensaje enviado 10/10');
                }).fail(() => {
                    console.log('error')
                })
            }
        </script>
    </head>
    <body>
        <div class="host cont">
            <h1 class="code">ABCDEF</h1>
            <div class="showpeople">
                <!-- <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Tulip Olsen</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Atticus</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">One One</p>
                    </div>
                </div>
                
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Jesse Cosay</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Lake</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Alan Dracula</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Grace Monroe</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Simon Laurent</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Hazel Null</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Kezz</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Min-gi Park</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Ryan Akagi</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Amelia Hughes</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Samantha</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Randall</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">R2DRos</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Cova</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Estherdm_</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Elena580</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">IselPH</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Hirune</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">MaryJoe</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Galletana</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">GuilleViejo</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Aitor</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Lucero</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Raulo</p>
                    </div>
                </div>
                <div class="equipo">
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Saicere</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">MeriRP</p>
                    </div>
                    <div class="persona">
                        <img src="C:/Users/Desarrollo/Pictures/Imagenes%20de%20ejemplo/612-200x200.jpg" class="miniavatar">
                        <p class="mininame">Samuu</p>
                    </div>
                </div> -->
            </div>
            <div class="ok">
                <p>Empezar</p>
            </div>
            <div class="addbot">
                <p>Añadir participante</p>
            </div>
            
        </div>
    </body>
    <script>
        function fnActualizarChat(){
            console.log("imagen subida");
            // $.ajax({
            //     url: "chatlog.txt",
            //     cache: false,
            //     success: function(html){		
            //         $(".chat")[0].html(html); //Insert chat log into the #chatbox div
            //         console.log(html); //Insert chat log into the console.log
            //     },
            // });
        }
        function fnWebHook(){
        $.ajax({
                url: 'https://discord.com/api/webhooks/845022656109477908/hvtiQkt32ffBilcCdRH7Zbi5T_BEw_kGK0rro0sKS4dw-1LEHC5o6bPt0caYI0JuGnzd',
                data: JSON.stringify({
                    content: 'hola'
                }),
                content: "hola"
            }).done((data) => {
                console.log(data);
                console.log('mensaje enviado 10/10');
            }).fail(() => {
                console.log('error')
            })
    }
        //actualizar y añadir gente
        fnWebHook();
        $(".addbot").on("click", ()=>{
            let nombre = prompt("Nombre");
            let imagen = prompt("ruta imagen");
            participantes[0][participantes[0].length] = nombre;
            participantes[1][participantes[1].length] = imagen;
            fnActualizarLista(nombre, imagen);
            //console.log(participantes)
            //fnActualizarLista();
        })
        //let participantes = [[],[]]
        let participantes = [["Agente 1", "Agente A", "AGENTE", "etnegA", "aGENTE CAPS", "Agenten't"],["https://picsum.photos/200/300", "https://picsum.photos/200/300", "https://picsum.photos/200/300", "https://picsum.photos/300/200", "https://picsum.photos/200/300", "https://picsum.photos/200/300"]]
        fnCrearLista()
        
        $("img.btnCerrar").on("click", fnExpulsarJugador)
        
        $("div.ok").on("click", fnStartGame)

        function fnCrearLista(){
            const cont = $(".showpeople")[0]
            //
            for(let i = 0; i<participantes[0].length; i++){
                //hacer equipo
                let equipo = document.createElement("div");
                equipo.setAttribute("class", "equipo");
                cont.appendChild(equipo)
                
                let pj, imagen, nombre, txtNombre;
                
                i--;
                for(let j=0; j<3; j++){
                    if(i<(participantes[0].length-1)){
                        i++;
                        pj = document.createElement("div")
                        pj.setAttribute("class", "persona")
                        equipo.appendChild(pj)
                        imagen = document.createElement("img")
                        imagen.setAttribute("src", participantes[1][i])
                        imagen.setAttribute("class", "miniavatar")
                        pj.appendChild(imagen);
                        imagen2 = document.createElement("img")
                        imagen2.setAttribute("src", "img/times-solid.svg")
                        imagen2.setAttribute("class", "btnCerrar")
                        pj.appendChild(imagen2);
                        nombre = document.createElement("p")
                        nombre.setAttribute("class","mininame")
                        pj.appendChild(nombre);
                        txtNombre = document.createTextNode(participantes[0][i])
                        nombre.appendChild(txtNombre);
                    }else{
                        console.log("Error, miembro del equipo inexistente")
                    }
                }
            }
        }

        function fnActualizarLista(nmbr, imgn){
            let introducido = false;
            for(let i = 0; i<$(".equipo").length; i++){
                if($(".equipo")[i].children.length > 2 ){
                    console.log("equipo lleno")
                }else{
                    console.log("aun queda espacio")
                    pj = document.createElement("div")
                    pj.setAttribute("class", "persona")
                    $(".equipo")[i].appendChild(pj)
                    imagen = document.createElement("img")
                    imagen.setAttribute("src", imgn)
                    imagen.setAttribute("class", "miniavatar")
                    pj.appendChild(imagen);
                    imagen2 = document.createElement("img")
                    imagen2.setAttribute("src", "img/times-solid.svg")
                    imagen2.setAttribute("class", "btnCerrar")
                    pj.appendChild(imagen2);
                    nombre = document.createElement("p")
                    nombre.setAttribute("class","mininame")
                    pj.appendChild(nombre);
                    txtNombre = document.createTextNode(nmbr)
                    nombre.appendChild(txtNombre);
                    introducido = true;
                    break;
                }
            }
            if(!introducido){
                console.log("nuevo equipo")
                equipo = document.createElement("div")
                equipo.setAttribute("class", "equipo")
                $(".equipo")[0].parentElement.appendChild(equipo)
                pj = document.createElement("div")
                pj.setAttribute("class", "persona")
                equipo.appendChild(pj)
                imagen = document.createElement("img")
                imagen.setAttribute("src", imgn)
                imagen.setAttribute("class", "miniavatar")
                pj.appendChild(imagen);
                imagen2 = document.createElement("img")
                imagen2.setAttribute("src", "img/times-solid.svg")
                imagen2.setAttribute("class", "btnCerrar")
                pj.appendChild(imagen2);
                nombre = document.createElement("p")
                nombre.setAttribute("class","mininame")
                pj.appendChild(nombre);
                txtNombre = document.createTextNode(nmbr)
                nombre.appendChild(txtNombre);
                introducido = true;
            }
            $("img.btnCerrar").on("click", fnExpulsarJugador)
        }

        function fnExpulsarJugador(event){
            let hijos = this.parentNode.parentNode.children.length
            if(hijos == 1){
                this.parentNode.parentNode.remove();
            }
            this.parentNode.remove()
        }
    
        let arrayDeJuego =  new Array;
        
        function fnStartGame(){
            //Llenado de datos a la tabla
            for(let i = 0; i<$(".equipo").length; i++){
                for(let j=0; j<$(".equipo")[i].children.length; j++){
                    let persona = $(".equipo")[i].children[j]
                    //console.log(persona);
                    arrayDeJuego[arrayDeJuego.length] = new Persona(persona.lastChild.innerHTML, persona.firstChild.src, i)
                }
            }
            fnCompletarPersonas()
            console.log(arrayDeJuego)
            // Aqui empezaría el juego o algo así
        }
    
        class Persona{
            constructor(nombre, imagen, nEquipo){
                this.nombre = nombre;
                this.imagen = imagen
                this.equipo = nEquipo;
                this.salud = 10;
                this.energia = 10;
                this.nManosLibres = 2;
                this.arrAliados = new Array;
                this.arrCompa = new Array;
                this.arrEnemigos = new Array;
                this.manos = new Array;
            }
        }
        class Arma{
            constructor(nombre, daño, nManos, hiriente){
                this.nombre = nombre;
                this.daño = daño;
                this.nManos = nManos;
                this.hiriente = hiriente;
                /** Municion o numero de ataques por cada vez */
            }
        }
        class Sitio{
            constructor(nombre, contenido, evento){
                this.nombre = nombre;
                this.contenido = contenido;
                this.evento = evento;
            }
        }

        //llena a las personas con sus amistades(añade a sus compas de equipo a amigos)
        function fnCompletarPersonas(){
            for(let i = 0; i < arrayDeJuego.length; i++){
                //
                for(let j = i+1; j < arrayDeJuego.length; j++){
                    if(arrayDeJuego[i].equipo == arrayDeJuego[j].equipo){
                        //console.log(arrayDeJuego[i].nombre + " y " + arrayDeJuego[j].nombre + " son amiguis");
                        arrayDeJuego[i].arrAliados[arrayDeJuego[i].arrAliados.length] = arrayDeJuego[j].nombre;
                        arrayDeJuego[j].arrAliados[arrayDeJuego[j].arrAliados.length] = arrayDeJuego[i].nombre;
                    }
                }
            }
        }
        
        
        /** GENERATION OF THE CODE
         * RETURNS DE CODE(String, 6 letters)
        */
        function generacionDelCodigo(){

            const letras = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'K', 'M', 'N', 'Ñ', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
            let code = '';
            for(let i = 0; i<6; i++){
                code = code + letras[Math.floor(Math.random()*letras.length)]
            }
            return code;
        }
        //the way we control that people appears only once per day
        //Para cada día:
        let personasPorInteractuar = new Array;
        arrayDeJuego.forEach(p => {
            if(p.salud > 0){
                personasPorInteractuar.push(p)
            }
        });
        personasPorInteractuar = personasPorInteractuar.sort((a, b) => 0.5 - Math.random());



        const recursos = ["comida", "un cura-heridas", "papel y boli"]
        // const armas = ["una espada", "una pistola", "lo de los pixeles"]
        const armas = [new Arma("Padota", 6, 2, false), new Arma("La pipa de la paz", 3, 1, true), new Arma("Lo de los pixeles del patojuego", 20, 2, false)]
        const sitios = ["una tienda de todo a 100 abandonada", "una casa-arbol", "un templo de dioses olvidados"]

        
        // function eventoEncontrarAlgo(Persona){
        //     //
        //     let nEncontrado = 0;
        //     switch(Math.floor(Math.random()*3)){
        //         case 0:
        //                 console.log(Persona.nombre + " ha encontrado recursos");
        //                 nEncontrado = Math.floor(Math.random()*recursos.length);
        //                 console.log("ha encontrado " + recursos[nEncontrado]);
        //             break;
        //         case 1:
        //             console.log(Persona.nombre + " ha encontrado un arma");
        //             nEncontrado = Math.floor(Math.random()*armas.length)
        //             console.log("ha encontrado " + armas[nEncontrado].nombre);
        //             //Persona se guarda el arma en el inventario, la deja o en su defecto la intercambia segun la cantidad de manos que tenga ocupadas
        //             break;
        //         case 2:
        //             console.log(Persona.nombre + " ha encontrado un sitio");
        //             nEncontrado = Math.floor(Math.random()*sitios.length)
        //             console.log("ha encontrado " + sitios[nEncontrado]);
        //             /** Comprobar la compañia de la gente, uno encuentra  y todos encuentran*/
        //         break;
        //         default:
        //             console.log("Adios");
        //     }
        // }

        function eventoEncontrarAlgo(Persona){
            //
            let nEncontrado = 0;
            switch(Math.floor(Math.random()*3)){
                case 0:
                        console.log(Persona.nombre + " ha encontrado recursos");
                        nEncontrado = Math.floor(Math.random()*recursos.length)
                        console.log("ha encontrado " + recursos[nEncontrado]);
                    break;
                case 1:
                    console.log(Persona.nombre + " ha encontrado un arma");
                    nEncontrado = Math.floor(Math.random()*armas.length)
                    let armaEncontrada = armas[nEncontrado];
                    console.log("ha encontrado " + armaEncontrada.nombre);
                    //Persona se guarda el arma en el inventario, la deja o en su defecto la intercambia segun la cantidad de manos que tenga ocupadas
                    
                    // Contar las manos ocupadas y libres
                    let manosLibres = Persona.nManosLibres;
                    // let manosOcupadas = 0;
                    // for(const i in Persona.manos){
                    //     manosOcupadas = manosOcupadas + Persona.manos[i].nManos;
                    // }
                    // Si tiene manos libres suficientes la coge
                    if(manosLibres >= armaEncontrada.nManos){
                        // Recoger el arma
                        Persona.manos.push(armaEncontrada);
                    }else if(armaEncontrada.daño > Persona.manos[Persona.manos.length-1]){
                        // Cambia el arma con menos daño por la nueva
                        /** Hay que controlar si el arma con menos daño es sin manos para no quitarla porque no hace falta */
                        let armavieja;
                        do{
                            armavieja = Persona.manos.pop();
                            manosLibres = manosLibres + armavieja.nManos;
                        }while(manosLibres < armaEncontrada.manos)
                        Persona.manos.push(armaEncontrada);
                    }else{
                        // Do nothing
                        // Esconde un poco el arma para que nadie más la encuentre
                    }
                    break;
                case 2:
                    console.log(Persona.nombre + " ha encontrado un sitio");
                    nEncontrado = Math.floor(Math.random()*sitios.length)
                    console.log("ha encontrado " + sitios[nEncontrado]);
                    sitios[nEncontrado].evento(Persona);
                break;
                default:
                    console.log("Error: se ha encontrado un error, situacion irrealizable, ESCAPA");
                    console.log("DONT DEAD");
                    console.log("OPEN INSIDE");
            }
        }
        
        function eventoEncontrarAlguien(Persona, p2, hostilidad = 50){
            let nRand = Math.floor(Math.random*101);
            /** CONTROLAR LA PREFERENCIA DE HOSTILIDAD SELECCIONADA*/
            /** CONTROLAR LA RELACIONES DE ALIANZAS PREVIAS O ENEMISTADES*/
            if(Persona.arrAliados.includes(Persona.nombre)){nRand += (hostilidad*0.25)}
            // if(Persona.arrEnemigos.includes(Persona.nombre)){nRand -= (hostilidad*0.25)}

            if(nRand > hostilidad){
                // Encuentro no hostil
                /** En principio solo puede ser una ALIANZA, los trueques no estarán habilitados(de momento) */

                // ALIANZA
                fnAlianza(Persona, p2);
            }else{
                // Encuentro hostil
                nRand = Math.floor(Math.random()*100);
                /** Si queremos que se pueda seleccionar la agresividad de la peña, aqui */
                if(nRand > 50){
                    // FLIGHT // HUIDA
                    console.log(Persona.nombre + " se encuentra con " + p2.nombre + " pero decide huir");
                }else{
                    // FIGHT // PELEA
                    fnCombate(Persona, p2);
                }
            }
        }

        function fnAlianza(p1, p2){
            if(p1.arrAliados.includes(p2.nombre)){
                // ALIANZA DURADERA
                
                p1.arrCompa.push(p2.nombre);
                p2.arrCompa.push(p1.nombre);
            }else if(p1.arrEnemigos.includes(p2.nombre)){
                // IMPOSIBLE ALIANZA
            }else{
                // ALIANZA MOMENTANEA
            }
        }

        function fnCombate(p1, p2){
            // CALCULAR LOS BANDOS
            let bando1, bando2;
            bando1 = new Array;
            bando1.push(p1);
            p1.arrCompa.forEach(nombreCompa => {
                arrayDeJuego.forEach(p => {
                    if(nombreCompa == p.nombre){
                        bando1.push(p);
                    }
                })
            });
            p2.arrCompa.forEach(nombreCompa => {
                arrayDeJuego.forEach(p => {
                    if(nombreCompa == p.nombre){
                        bando2.push(p);
                    }
                })
            });
            // CALCULO DE DAÑO POR EQUIPO
            bando1.forEach(p => {
                let dañoPorPersona = 0
                p.manos.forEach(arma => {
                    dañoPorPersona += arma.daño;
                })
                if(dañoPorPersona == 0){ dañoPorPersona = 1}
                dañoPorMano1 += dañoPorPersona;
            })
            bando1.forEach(p => {
                let dañoPorPersona = 0
                p.manos.forEach(arma => {
                    dañoPorPersona += arma.daño;
                })
                if(dañoPorPersona == 0){ dañoPorPersona = 1}
                dañoPorMano1 += dañoPorPersona;
            })



            

        }
        

        //
            // https://codepen.io/airnan/full/PWmRMe
            // https://medium.com/davao-js/tutorial-creating-a-simple-discord-bot-9465a2764dc0
            // https://youtu.be/EUB777JJT5E
            
            // // DISCORD WEBHOOKS
            // https://youtu.be/-4Lid7tBr6Y
            // https://discord.com/developers/docs/resources/webhook#get-webhook
        //
    </script>
</html>
